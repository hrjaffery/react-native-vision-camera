{"version":3,"names":["useEffect","useMemo","WorkletsProxy","SkiaProxy","withFrameRefCounting","VisionCameraProxy","getDegrees","orientation","getOrientation","degrees","clamped","Error","relativeTo","a","b","withRotatedFrame","frame","canvas","previewOrientation","func","save","scale","translate","height","width","rotate","restore","getSurfaceSize","createSkiaFrameProcessor","frameProcessor","surfaceHolder","offscreenTextures","Skia","Worklets","getSkiaSurface","threadId","getCurrentThreadId","size","value","surface","Surface","MakeOffscreen","dispose","createDrawableProxy","nativeBuffer","getNativeBuffer","image","Image","MakeImageFromNativeBuffer","pointer","canvasProxy","Proxy","get","_","property","paint","drawImage","delete","withBaseClass","getCanvas","drawableFrame","black","Color","clear","flush","snapshot","makeImageSnapshot","snapshotCopy","makeNonTextureImage","push","length","texture","shift","type","useSkiaFrameProcessor","dependencies","useSharedValue","workletContext","runAsync","surfaces","Object","values","map","v","forEach","s"],"sourceRoot":"../../../src","sources":["skia/useSkiaFrameProcessor.ts"],"mappings":"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","ignoreList":[]}
